---
marp: true
headingDivider: 2
paginate: false
markdown.marp.enableHtml: true

size: 16:9

---

# ID2116: Wk07-02:  p5.play
<!-- color: black -->

<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Nunito" />
<link rel="stylesheet" href="../css/slidetemplate.css">

# 


## Javascript Objects  
<!-- 
Our old style code

    let x = 100;
    let y = 100;
    let size = 20;
    
    function drawCircle(){
      ellipse(x,y,size,size);
    }
    
    drawCircle(); -->

Code using Javascript Object.

    let circleObject = {
      x:100,
      y:100,
      size:20,
      drawCircle:function(){
        ellipse(this.x,this.y,this.size,this.size);
      }
    }
    
    circleObject.drawCircle();


https://www.youtube.com/watch?v=-e5h4IGKZRY&


[https://youtu.be/-e5h4IGKZRY](https://youtu.be/-e5h4IGKZRY)


## Introduction to p5.play

**p5.play** provides a [Sprite](http://molleindustria.github.io/p5.play/examples/index.html?fileName=sprite.js) class to manage visual objects in [2D space](http://molleindustria.github.io/p5.play/examples/index.html?fileName=sprite4.js) and features such as [animation support](http://molleindustria.github.io/p5.play/examples/index.html?fileName=sprite3.js), [basic collision detection](http://molleindustria.github.io/p5.play/examples/index.html?fileName=collisions.js) and [resolution](http://molleindustria.github.io/p5.play/examples/index.html?fileName=collisions4.js), sprite [grouping](http://molleindustria.github.io/p5.play/examples/index.html?fileName=sprite8.js), helpers for mouse and keyboard [interactions](http://molleindustria.github.io/p5.play/examples/index.html?fileName=keyPresses.js), and a [virtual camera](http://molleindustria.github.io/p5.play/examples/index.html?fileName=camera.js).


## Setting up [p5.play](http://molleindustria.github.io/p5.play/)
1. Download [p5.play.js](https://raw.githubusercontent.com/molleindustria/p5.play/master/lib/p5.play.js) and upload the .js file to editor
    1. Original Site: 
        1. Download → unzip → find [p5.play.js](https://raw.githubusercontent.com/molleindustria/p5.play/master/lib/p5.play.js) under **lib/** folder. 
2. Add a following line to “index.html” to enable p5.play.js.

```html
    <script src="./p5.play.js"></script>
```

![](https://d2mxuefqeaa7sj.cloudfront.net/s_BE75610C4665F8E44484791C83B48950D92B2060E04AF711588803D8B6AE930C_1552018813323_ScriptP5PLAY.png)

## Try p5.play test code. 

scetch.js

    //p5.play test code
    let sprite;
    
    function setup() {
      createCanvas(800, 400); 
    
      //create a p5.play sprite
      sprite = createSprite(400, 200,40,40);
      
    }
    
    function draw() {
      background(255, 255, 255);
       
      //assign mouse cursor position to the sprite position properties
      sprite.position.x = mouseX;
      sprite.position.y = mouseY;
    
      //if mouse IS pressed, rotate the sprite 1deg every frames.
      //if mouse IS NOT pressed, set the sprite to original angle. 
      if(mouseIsPressed){
              sprite.rotation += 1;
      }else{
              sprite.rotation = 0;
      }
    
      //if debug is set to true bounding boxes, centers and depths are visualized
      //sprite.debug = mouseIsPressed;
      
      drawSprites();
    }
    
# p5.play
- [createSprite(xywidthheight)](http://molleindustria.github.io/p5.play/docs/classes/p5.play.html#method-createSprite) 
- [drawSprite(sprite)](http://molleindustria.github.io/p5.play/docs/classes/p5.play.html#method-drawSprite)

# p5.play.sprite
 **Properties**
- [mouseActive](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#prop-mouseActive)
- [mouseIsOver](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#prop-mouseIsOver)
- [mouseIsPressed](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#prop-mouseIsPressed)
- [position](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#prop-position)
- [rotation](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#prop-rotation)
- [rotationSpeed](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#prop-rotationSpeed)
- [scale](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#prop-scale)
- [shapeColor](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#prop-shapeColor)
- [velocity](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#prop-velocity)
- [visible](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#prop-visible)
- [width](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#prop-width)  |     |

# p5.play.sprite
- **Methods**
    - [addAnimation(labelanimation)](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#method-addAnimation) : add a sequence of images to create animation 
    - [addImage(labelimg)](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#method-addImage): add a image with label
    - [setCollider(typeoffsetXoffsetYwidthheight)](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#method-setCollider) : set collision detection area
    - [setSpeed(speedangle)](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#method-setSpeed) : set movement by speed + angle
    - [setVelocity(xy)](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#method-setVelocity): set movement by XY velocities
    - [update()](http://molleindustria.github.io/p5.play/docs/classes/Sprite.html#method-update)
- 


## p5.play ex1 : [Control Character with keyboard input.](https://editor.p5js.org/didny/sketches/4Kbr-hMhp) 
    //Move a Character with Keyboard Input
    //use arrow keys to move 
    
    let emojiman;
    function setup() {
      createCanvas(800, 400);
      //create a sprite
      emojiMan = createSprite(400, 200);
      //compact way to add an image
      emojiMan.addImage(loadImage('character01.png'))
    }
    
    function draw() {
      background(255, 255, 255);
    
      // emojiMan.position.x = mouseX;
      // emojiMan.position.y = mouseY;
    
      if(mouseIsPressed){
              emojiMan.rotation += 1;
      }else{
              emojiMan.rotation = 0;
      }
    
      //check if LEFT or RIGHT arrow keys are down. 
      if(keyIsDown(LEFT_ARROW)){
              emojiMan.velocity.x = -1; // add movement velocity towards -1(left) direction.
      }else if(keyIsDown(RIGHT_ARROW)){
              emojiMan.velocity.x = 1;  // add movement velocity towards  1(right) direction
      }else{
              emojiMan.velocity.x = 0;
      }
      
      if(keyIsDown(UP_ARROW)){
        //add code here
      }else if(keyIsDown(DOWN_ARROW)){
        //add code here
      }else{
        //add code here
      }  
      //if debug is set to true bounding boxes, centers and depths are visualized
      //emojiMan.debug = mouseIsPressed;
      
      drawSprites();
    }
    
    


## XY version

https://editor.p5js.org/didny/sketches/i5h7Sg4id


## p5.play ex2: Control Character with micro:[bit buttons](https://editor.p5js.org/didny/sketches/MsdKgovHy)
1. download and copy [microBit.js](https://www.dropbox.com/s/euwm80sh4too4vj/microBit.js?dl=0) into the [editor.p5.js sketch](https://editor.p5js.org/didny/sketches/wRkJAJtEC).
    Original File: https://antefact.github.io/microBit.js/
2. add following line to index.html
      <script src="./microBit.js"></script>
![](https://d2mxuefqeaa7sj.cloudfront.net/s_BE75610C4665F8E44484791C83B48950D92B2060E04AF711588803D8B6AE930C_1552026028515_Screenshot+2019-03-08+14.20.08.png)

3. Copy & paste [bit buttons](https://editor.p5js.org/didny/sketches/MsdKgovHy) code and try.

```javascript
//Move a Character with Keyboard Input
//use arrow keys to move 

var emojiman;
var microBit;

function searchDevice(){
  microBit.searchDevice();
}

function setup() {
  createCanvas(800, 400);

  //create a sprite
  emojiMan = createSprite(400, 200);
  //compact way to add an image
  emojiMan.addImage(loadImage('character01.png'));
  
  microBit=new uBit();

  button = createButton('connect microBit');
  button.mousePressed( searchDevice); // attach button listener
  


  microBit.onConnect(function(){
    console.log("connected");
  });

  microBit.onDisconnect(function(){
    console.log("disconnected");
  });

}

function draw() {
  background(255, 255, 255);

  // emojiMan.position.x = mouseX;
  // emojiMan.position.y = mouseY;

  if(mouseIsPressed){
          emojiMan.rotation += 1;
  }else{
          emojiMan.rotation = 0;
  }

  //check if LEFT or RIGHT arrow keys are down. 
  if(keyIsDown(LEFT_ARROW)){
          emojiMan.velocity.x = -1; // add movement velocity towards -1(left) direction.
  }else if(keyIsDown(RIGHT_ARROW)){
          emojiMan.velocity.x = 1;  // add movement velocity towards  1(right) direction
  }else{
          emojiMan.velocity.x = 0;
  }
  
  if(keyIsDown(UP_ARROW)){
    //add code here
  }else if(keyIsDown(DOWN_ARROW)){
    //add code here
  }else{
    //add code here
  }

  
  //if debug is set to true bounding boxes, centers and depths are visualized
  //emojiMan.debug = mouseIsPressed;
  
  drawSprites();
}

function keyPressed(){



}


```
    


## Weekly Exercise: Week7 

Modify ex2 code to add accelerometer interaction (e.g rotating character etc.)
**hint:**   angle = map(microBit.getAccelerometer().x,-1024,1024,0,360);


## References:
- p5.play github page

http://molleindustria.github.io/p5.play/docs/classes/p5.play.html

- making-games-with-p5-play

https://creative-coding.decontextualize.com/making-games-with-p5-play/

